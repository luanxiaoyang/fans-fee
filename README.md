# 🎯 直播成本计算系统 (Node.js版本)

一个基于网页的直播成本计算工具，后端使用 **Node.js + Express** 实现，帮助用户快速计算上粉成本、注册成本、付费成本等关键指标。

## ✨ 功能特点

- 🚀 **快速计算**: 输入参数后立即获得计算结果
- 📊 **多维度分析**: 支持上粉成本、注册成本、付费成本等计算
- 🎨 **美观界面**: 现代化UI设计，响应式布局
- 📱 **移动友好**: 支持手机、平板等移动设备
- 🔒 **数据安全**: 本地计算，数据不上传
- ⚡ **高性能**: 基于Node.js，响应速度快
- 📊 **智能日报**: 自动生成详细报告，包含预警提醒
- 📋 **一键复制**: 支持日报内容一键复制到剪贴板
- 💾 **文件下载**: 支持日报内容下载为文本文件

## 🛠️ 技术架构

- **后端**: Node.js + Express.js
- **前端**: HTML5 + CSS3 + JavaScript
- **通信**: RESTful API + JSON
- **部署**: 支持本地运行和服务器部署

## 📋 计算公式

### 总成本计算
```
上粉总成本 = 小组成员 × 150 + 上粉数量 × 0.2 + (通道数量 × 200) ÷ 25 + 网络费用(100) + 账号数量 × 16
注册总成本 = 上粉总成本 + 上粉数量 × 0.15
付费总成本 = 注册总成本 + 转化人员工资
价值总成本 = 付费总成本
转化人员工资 = 150 + 付费数量 × 5 + 价值数量 × 50
```

### 单个成本计算
```
每个上粉成本 = 上粉总成本 ÷ 上粉数量
单个注册成本 = 注册总成本 ÷ 注册数量
单个付费成本 = 付费总成本 ÷ 付费数量
单个价值成本 = 付费总成本 ÷ 价值数量
```

## 🚀 快速开始

### 方法1: 使用启动脚本（推荐）
1. 双击运行 `start.bat`
2. 等待依赖安装完成
3. 浏览器访问 `http://localhost:8000`

### 方法2: 手动启动
1. 安装Node.js 18+
2. 安装依赖: `npm install`
3. 启动服务: `npm start` 或 `node app.js`
4. 浏览器访问: `http://localhost:8000`

### 开发模式
```bash
npm run dev  # 使用nodemon自动重启
```

## 📱 使用说明

1. **输入参数**: 在左侧表单中输入相关数据
2. **点击计算**: 点击"开始计算"按钮
3. **查看结果**: 右侧显示计算结果
4. **参数说明**:
   - 上粉数量: 必填，必须大于0
   - 其他参数: 可选，默认为0

## 🔧 开发说明

### 项目结构
```
直播成本后端计算/
├── app.js               # 🟢 Express.js后端服务
├── package.json         # 📦 Node.js依赖配置
├── static/              # 🌐 静态文件目录
│   └── index.html      # 🎨 前端页面
├── start.bat            # 🚀 Windows启动脚本
├── README.md            # 📖 项目说明
├── test_cases.md        # 🧪 测试用例文档
└── 需求文档.md          # 📋 原始需求文档
```

### API接口
- `GET /`: 返回主页
- `POST /api/calc`: 成本计算接口
- `GET /api/health`: 健康检查接口

### 自定义配置
修改 `app.js` 中的端口号:
```javascript
const PORT = process.env.PORT || 8000;  // 修改端口号
```

## 🌟 扩展功能

- [x] **智能日报生成** - 自动生成详细报告，包含预警提醒
- [x] **一键复制功能** - 支持日报内容一键复制到剪贴板
- [x] **文件下载功能** - 支持日报内容下载为文本文件
- [ ] 数据持久化存储 (MongoDB/MySQL)
- [ ] 用户登录系统
- [ ] 历史记录查询
- [ ] 图表可视化 (ECharts/Chart.js)
- [ ] 文件上传功能
- [ ] 日志记录系统

## 📊 性能特点

- **响应时间**: < 100ms (本地环境)
- **并发支持**: 支持多用户同时访问
- **内存使用**: 轻量级，内存占用低
- **扩展性**: 模块化设计，易于扩展

## 🚀 部署方案

### 开发环境
- Node.js 18+
- npm 或 yarn
- nodemon (开发时自动重启)

### 生产环境
- 使用 **PM2** 作为进程守护
- 使用 **Nginx** 作为反向代理
- 支持 **Docker 容器化部署**
- 环境变量配置

## 📞 技术支持

如有问题或建议，请联系开发团队。

---

**版本**: 1.0.0  
**技术栈**: Node.js + Express  
**更新日期**: 2024年
