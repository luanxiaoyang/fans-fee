# 直播成本计算系统 - 项目说明文档

## 项目概述

本项目是一个基于Node.js + Express的直播成本计算系统，提供Web界面进行成本计算和报告生成。

## 项目规划

### 技术栈
- **后端**: Node.js + Express.js
- **前端**: HTML5 + CSS3 + JavaScript
- **部署**: Docker + Docker Compose
- **端口**: 34145

### 功能模块
1. 成本计算API
2. Web界面展示
3. 日报生成功能
4. 健康检查接口

## 实施方案

### 端口配置修改
- ✅ **已完成** - 将默认端口从8000修改为34145
- ✅ **已完成** - 更新app.js中的PORT配置
- ✅ **已完成** - 更新start.bat中的访问地址提示
- ✅ **已完成** - 更新README.md中的端口信息

### Docker部署配置
- ✅ **已完成** - 创建Dockerfile，基于node:18-alpine镜像
- ✅ **已完成** - 创建docker-compose.yml，配置服务和网络
- ✅ **已完成** - 创建.dockerignore，优化构建过程
- ✅ **已完成** - 创建deploy.bat部署脚本
- ✅ **已完成** - 更新README.md，添加Docker部署说明

### 部署方式
1. **传统部署**: 使用start.bat或npm start
2. **Docker部署**: 使用deploy.bat或docker-compose命令
3. **生产环境**: 推荐使用Docker部署

## 进度记录

### 2024年当前进度
- ✅ **已完成** (当前时间) - 端口修改为34145
- ✅ **已完成** (当前时间) - Docker配置文件创建
- ✅ **已完成** (当前时间) - 部署脚本创建
- ✅ **已完成** (当前时间) - 文档更新

## 部署说明

### Docker部署步骤
1. 确保本地已安装Docker和Docker Compose
2. 在项目根目录执行以下命令之一：
   - Windows: 双击运行 `deploy.bat`
   - 手动: `docker-compose up -d`
3. 访问 http://localhost:34145 查看应用

### 常用Docker命令
```bash
# 启动服务
docker-compose up -d

# 查看状态
docker-compose ps

# 查看日志
docker-compose logs -f

# 停止服务
docker-compose down

# 重新构建
docker-compose build --no-cache
```

### 文件结构
```
fans-fee/
├── app.js                 # 主应用文件
├── package.json          # 项目配置
├── Dockerfile           # Docker镜像配置
├── docker-compose.yml   # Docker编排配置
├── .dockerignore        # Docker忽略文件
├── deploy.bat           # Windows部署脚本
├── start.bat            # 传统启动脚本
├── README.md            # 项目说明
├── 说明文档.md          # 本文档
└── static/              # 静态文件目录
    └── index.html       # 前端页面
```

## 注意事项

1. **端口冲突**: 确保34145端口未被其他应用占用
2. **Docker环境**: 确保Docker服务正常运行
3. **防火墙**: 如需外部访问，请开放34145端口
4. **日志监控**: 生产环境建议配置日志收集和监控

## 后续优化建议

1. 添加环境变量配置文件(.env)
2. 配置生产环境的日志管理
3. 添加健康检查和监控
4. 考虑使用Nginx作为反向代理
5. 添加SSL证书支持HTTPS